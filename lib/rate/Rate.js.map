{"version":3,"names":[],"mappings":"","sources":["rate/Rate.js"],"sourcesContent":["/**\n * @file Rate\n * @author wuqi03(441984145@qq.com)\n * @time 17/7/19\n */\n\nimport {h, Component} from 'preact';\nimport classNames from '../util/classnames';\n\nimport Icon from '../icon/Icon';\n\n\nexport default class Rate extends Component {\n    static defaultProps = {\n        prefixCls: 'cui',\n        num: 0,\n        count: 5,\n        disabled: false,\n        hasHover: true\n    };\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            num: +props.num\n        };\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.setState({\n            num: +nextProps.num\n        });\n    }\n\n    /**\n     * 打分点击操作\n     *\n     * @private\n     * @param {number} num 第几个rate\n     */\n    rateSelectHander(num) {\n        const onRateSelect = this.props.onRateSelect;\n\n        onRateSelect && onRateSelect(num);\n    }\n\n    /**\n     * hover事件\n     *\n     * @private\n     * @param {number} num 当前被进入的子项编号\n     */\n    rateMouseOver(num) {\n        this.setState({num});\n\n        this.props.onRateOver && this.props.onRateOver(num);\n    }\n\n    /**\n     * leave事件\n     *\n     * @private\n     */\n    rateMouseLeave() {\n        this.setState({\n            num: +this.props.num\n        });\n\n        this.props.onRateLeave && this.props.onRateLeave();\n    }\n\n    render() {\n        const {prefixCls, className, count, size, rateContent, hasHover, disabled, ...others} = this.props;\n        const num = this.state.num;\n\n        const rateCls = classNames({\n            [`${prefixCls}-rate`]: true,\n            [className]: className\n        });\n\n        let starDom = [];\n\n        for (let i = 0; i < +count; i++) {\n            let cls = classNames({\n                [`${prefixCls}-rate-item`]: true,\n                'rate-active': i < +num\n            });\n\n            let index = i + 1;\n\n            starDom.push(\n                <span\n                    className={cls}\n                    onClick={() => disabled || this.rateSelectHander(index)}\n                    onMouseOver={() => disabled || hasHover && this.rateMouseOver(index)}\n                    onMouseLeave={() => disabled || hasHover && this.rateMouseLeave()}\n                >\n                    {rateContent ? rateContent : <Icon type=\"favor-fill\" style={{fontSize: size + 'px' || '16px'}} />}\n                </span>\n            );\n        }\n\n        return (\n            <div className={rateCls} {...others}>\n                {starDom}\n            </div>\n        );\n    }\n}\n"],"file":"Rate.js"}