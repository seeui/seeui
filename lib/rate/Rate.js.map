{"version":3,"sources":["rate/Rate.js"],"names":["Rate","props","state","num","componentWillReceiveProps","nextProps","nextContext","setState","rateSelectHander","onRateSelect","rateMouseOver","onRateOver","rateMouseLeave","onRateLeave","render","prefixCls","className","count","size","rateContent","hasHover","disabled","others","rateCls","starDom","i","cls","index","push","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;QAYqBA,I;;;AASjB,sBAAYC,KAAZ,EAAmB;AAAA;;AAAA,qEACf,sBAAMA,KAAN,CADe;;AAGf,kBAAKC,KAAL,GAAa;AACTC,qBAAK,CAACF,MAAME;AADH,aAAb;AAHe;AAMlB;;uBAEDC,yB,sCAA0BC,S,EAAWC,W,EAAa;AAC9C,iBAAKC,QAAL,CAAc;AACVJ,qBAAK,CAACE,UAAUF;AADN,aAAd;AAGH,S;;uBAQDK,gB,6BAAiBL,G,EAAK;AAClB,gBAAMM,eAAe,KAAKR,KAAL,CAAWQ,YAAhC;;AAEAA,4BAAgBA,aAAaN,GAAb,CAAhB;AACH,S;;uBAQDO,a,0BAAcP,G,EAAK;AACf,iBAAKI,QAAL,CAAc;AACVJ,qBAAKA;AADK,aAAd;;AAIA,iBAAKF,KAAL,CAAWU,UAAX,IAAyB,KAAKV,KAAL,CAAWU,UAAX,CAAsBR,GAAtB,CAAzB;AACH,S;;uBAODS,c,6BAAiB;AACb,iBAAKL,QAAL,CAAc;AACVJ,qBAAK,CAAC,KAAKF,KAAL,CAAWE;AADP,aAAd;;AAIA,iBAAKF,KAAL,CAAWY,WAAX,IAA0B,KAAKZ,KAAL,CAAWY,WAAX,EAA1B;AACH,S;;uBAEDC,M,qBAAS;AAAA;AAAA;;AAAA,yBACmF,KAAKb,KADxF;AAAA,gBACEc,SADF,UACEA,SADF;AAAA,gBACaC,SADb,UACaA,SADb;AAAA,gBACwBC,KADxB,UACwBA,KADxB;AAAA,gBAC+BC,IAD/B,UAC+BA,IAD/B;AAAA,gBACqCC,WADrC,UACqCA,WADrC;AAAA,gBACkDC,QADlD,UACkDA,QADlD;AAAA,gBAC4DC,QAD5D,UAC4DA,QAD5D;AAAA,gBACyEC,MADzE;;AAEL,gBAAMnB,MAAM,KAAKD,KAAL,CAAWC,GAAvB;;AAEA,gBAAMoB,UAAU,yDACRR,SADQ,cACW,IADX,cAEXC,SAFW,IAECA,SAFD,eAAhB;;AAKA,gBAAIQ,UAAU,EAAd;;AATK,uCAWIC,CAXJ;AAAA;;AAYD,oBAAIC,MAAM,2DACFX,SADE,mBACsB,IADtB,eAEN,aAFM,IAESU,IAAI,CAACtB,GAFd,gBAAV;;AAKA,oBAAIwB,QAAQF,IAAI,CAAhB;;AAEAD,wBAAQI,IAAR,CACI;AAAA;AAAA;AACI,mCAAWF,GADf;AAEI,iCAAS;AAAA,mCAAML,YAAY,OAAKb,gBAAL,CAAsBmB,KAAtB,CAAlB;AAAA,yBAFb;AAGI,qCAAa;AAAA,mCAAMN,YAAYD,YAAY,OAAKV,aAAL,CAAmBiB,KAAnB,CAA9B;AAAA,yBAHjB;AAII,sCAAc;AAAA,mCAAMN,YAAYD,YAAY,OAAKR,cAAL,EAA9B;AAAA;AAJlB;AAMKO,kCAAcA,WAAd,GAA4B,iCAAM,MAAK,YAAX,EAAwB,MAAMD,QAAQ,IAAtC;AANjC,iBADJ;AAnBC;;AAWL,iBAAK,IAAIO,IAAI,CAAb,EAAgBA,IAAI,CAACR,KAArB,EAA4BQ,GAA5B,EAAiC;AAAA,sBAAxBA,CAAwB;AAkBhC;;AAED,mBACI;AAAA;AAAA,uCAAK,WAAWF,OAAhB,IAA6BD,MAA7B;AACKE;AADL,aADJ;AAKH,S;;;;;AAlGgBxB,Q,CACV6B,Y,GAAe;AAClBd,mBAAW,KADO;AAElBZ,aAAK,CAFa;AAGlBc,eAAO,CAHW;AAIlBI,kBAAU,KAJQ;AAKlBD,kBAAU;AALQ,K;sBADLpB,I","file":"Rate.js","sourcesContent":["/**\n * @file Rate\n * @author wuqi03(441984145@qq.com)\n * @time 17/7/19\n */\n\nimport {h, Component} from 'preact';\nimport classNames from '../util/classnames';\n\nimport Icon from '../icon/Icon';\n\n\nexport default class Rate extends Component {\n    static defaultProps = {\n        prefixCls: 'cui',\n        num: 0,\n        count: 5,\n        disabled: false,\n        hasHover: true\n    };\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            num: +props.num\n        };\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        this.setState({\n            num: +nextProps.num\n        });\n    }\n\n    /**\n     * 打分点击操作\n     *\n     * @private\n     * @param {number} num 第几个rate\n     */\n    rateSelectHander(num) {\n        const onRateSelect = this.props.onRateSelect;\n\n        onRateSelect && onRateSelect(num);\n    }\n\n    /**\n     * hover事件\n     *\n     * @private\n     * @param {number} num 当前被进入的子项编号\n     */\n    rateMouseOver(num) {\n        this.setState({\n            num: num\n        });\n\n        this.props.onRateOver && this.props.onRateOver(num);\n    }\n\n    /**\n     * leave事件\n     *\n     * @private\n     */\n    rateMouseLeave() {\n        this.setState({\n            num: +this.props.num\n        });\n\n        this.props.onRateLeave && this.props.onRateLeave();\n    }\n\n    render() {\n        const {prefixCls, className, count, size, rateContent, hasHover, disabled, ...others} = this.props;\n        const num = this.state.num;\n\n        const rateCls = classNames({\n            [`${prefixCls}-rate`]: true,\n            [className]: className\n        });\n\n        let starDom = [];\n\n        for (let i = 0; i < +count; i++) {\n            let cls = classNames({\n                [`${prefixCls}-rate-item`]: true,\n                'rate-active': i < +num\n            });\n\n            let index = i + 1;\n\n            starDom.push(\n                <span\n                    className={cls}\n                    onClick={() => disabled || this.rateSelectHander(index)}\n                    onMouseOver={() => disabled || hasHover && this.rateMouseOver(index)}\n                    onMouseLeave={() => disabled || hasHover && this.rateMouseLeave()}\n                >\n                    {rateContent ? rateContent : <Icon type=\"favor-fill\" size={size || '16'} />}\n                </span>\n            );\n        }\n\n        return (\n            <div className={rateCls} {...others}>\n                {starDom}\n            </div>\n        );\n    }\n}\n"]}