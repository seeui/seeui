{"version":3,"names":[],"mappings":"","sources":["dialog/Toast.js"],"sourcesContent":["/**\n * @file Toast\n * @author zhaiwanli\n * @time 17/7/15\n */\n\nimport {h, Component} from 'preact';\nimport classNames from '../util/classnames';\nimport Dialog from './Dialog';\n\nimport Singleton from '../util/Singleton';\n\nexport default class Toast extends Component {\n\n    static defaultProps = {\n        remain: 3,\n        hasClose: false\n    };\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            remain: props.remain\n        };\n    }\n\n    countDown() {\n        let self = this;\n\n        this.counter = setInterval(function () {\n            if (self.state.remain === 1) {\n                this.counter && clearInterval(this.counter);\n                this.counter = null;\n\n                self.setState({remain: self.props.remain + 1});\n                self.props.onHide && self.props.onHide();\n            }\n\n            self.setState({remain: --self.state.remain});\n        }, 1000);\n    }\n\n    onToastShow() {\n        this.countDown();\n\n        this.props.onShow && this.props.onShow();\n    }\n\n    onToastHide(data) {\n        this.counter && clearInterval(this.counter);\n        this.counter = null;\n\n        this.props.onHide && this.props.onHide(data);\n    }\n\n\n    componentWillReceiveProps(nextProps) {\n        const {remain} = nextProps;\n\n        this.setState({\n            remain: remain || this.state.remain\n        });\n    }\n\n    render() {\n        const {children, title, ...others} = this.props;\n\n        return (\n            <Dialog\n                {...others}\n                title={title}\n                onShow={this.onToastShow.bind(this)}\n                onHide={this.onToastHide.bind(this)}\n            >\n                {children}\n                <div className=\"cui-dialog-count-down\">{this.state.remain}s</div>\n            </Dialog>\n        );\n    }\n}\n\nexport const SingleToast = new Singleton(Toast);\n"],"file":"Toast.js"}