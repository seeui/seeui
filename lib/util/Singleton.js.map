{"version":3,"sources":["util/Singleton.js"],"names":["Singleton","component","dom","instance","show","option","document","createElement","body","appendChild","Component","hide"],"mappings":";;;;;;;;;;;;;;;;;QAUqBA,S;AACjB,2BAAYC,SAAZ,EAAuB;AAAA;;AACnB,iBAAKC,GAAL,GAAW,IAAX;AACA,iBAAKD,SAAL,GAAiBA,SAAjB;AACA,iBAAKE,QAAL,GAAgB,IAAhB;AACH;;4BAEDC,I,iBAAKC,M,EAAQ;AACT,gBAAI,CAAC,KAAKH,GAAV,EAAe;AACX,qBAAKA,GAAL,GAAWI,SAASC,aAAT,CAAuB,KAAvB,CAAX;AACAD,yBAASE,IAAT,CAAcC,WAAd,CAA0B,KAAKP,GAA/B;AACH;;AAED,gBAAMQ,YAAY,KAAKT,SAAvB;;AAEA,iBAAKE,QAAL,GAAgB,0BAAO,eAAC,SAAD,EAAeE,MAAf,CAAP,EAAiC,KAAKH,GAAtC,CAAhB;AACA;AACA;AACA;AACH,S;;4BAEDS,I,mBAAO;AACH,gBAAI,KAAKR,QAAT,EAAmB;AACf,0DAAuB,KAAKD,GAA5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AACJ,S;;;;;sBAjCgBF,S","file":"Singleton.js","sourcesContent":["/**\n * @file react singleton\n * https://github.com/Caesor/react-singleton\n * @author cgzero(cgzero@cgzero.com)\n * @time 2017-07-08\n */\n\nimport {h} from 'preact';\nimport {render, unmountComponentAtNode} from 'preact-compat';\n\nexport default class Singleton {\n    constructor(component) {\n        this.dom = null;\n        this.component = component;\n        this.instance = null;\n    }\n\n    show(option) {\n        if (!this.dom) {\n            this.dom = document.createElement('div');\n            document.body.appendChild(this.dom);\n        }\n\n        const Component = this.component;\n\n        this.instance = render(<Component {...option}/>, this.dom);\n        // this.instance.setState({\n        //     show: true\n        // });\n    }\n\n    hide() {\n        if (this.instance) {\n            unmountComponentAtNode(this.dom);\n            // this.instance.props.show = false;\n            // this.instance.setState({\n            //     show: false\n            // }, () => {\n            //     setTimeout(() => {\n            //         unmountComponentAtNode(this.dom);\n            //     }, 100);\n            // });\n        }\n    }\n}\n"]}